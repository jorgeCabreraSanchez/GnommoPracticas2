<h3>Alertas enviadas</h3>
<hr>
<button class="btn btn-danger" data-toggle="modal" data-target="#deleteAllAlerts">Eliminar todas las alertas</button>
<br>
<br>
<p>
  <a [routerLink]="['']" (click)="logout()">Cerrar sesión</a>
</p>
<p>
  <a [routerLink]="['/cambiar-contrasena']">Cambiar contraseña</a>
</p>
<br>
<h6 class="alert alert-danger" *ngIf="alerts.length ==0">No has enviado ninguna alerta</h6>
<table *ngIf="alerts.length !=0" class="table table-bordered table-striped tabla">
  <thead>
    <tr class="filters">
      <th>Asignada</th>
      <th>Fecha</th>
      <th>Título</th>
      <th style="width: 30%">Descripción</th>
      <th>Provincia</th>
      <th style="width: 30%">Finalizada</th>
      <th>
        <fa name="paperclip"></fa>
      </th>
      <th>Eliminar</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let alert of alerts">
      <td *ngIf="alert.assigned==true">Sí</td>
      <td *ngIf="alert.assigned==false">No</td>
      <td>{{ alert.date | date: 'dd/MM/yyyy' }}</td>
      <td *ngIf="alert.title!=''">{{ alert.title }}</td>
      <td *ngIf="alert.title==''">Sin título</td>
      <td *ngIf="alert.description==''">Sin descripción</td>
      <td *ngIf="alert.description!=''">{{ alert.description }}</td>
      <td>{{ alert.province }}</td>
      <td *ngIf="alert.state=='finished'">Sí</td>
      <td *ngIf="alert.state=='unfinished'" (click)="closeAlert(appuserId, alert.id)">No</td>
      <td *ngIf="!alert.attachments">Sin adjuntos</td>
      <td *ngFor="let attached of alert.attachments">
        <a href="{{ attached }}">{{ attached }}</a>
      </td>
      <td>
        <button class="btn btn-danger" data-toggle="modal" data-target="#deleteAlert" (click)="idEliminar(alert.id)">
          <fa name="trash"></fa>Eliminar mensaje</button>
      </td>
    </tr>
  </tbody>
</table>
<hr>
<button class="btn btn-success" [routerLink]="['/nuevo']">Nueva alerta</button>

<!-- Modal de eliminar un alerta -->
<div class="modal fade" id="deleteAlert">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Confirmar acción</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        ¿Estás seguro de querer eliminar este alerta?
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button class="btn btn-danger" (click)="delSentAlert(appuserId, alertId)" data-toggle="modal" data-target="#deleteAlert">
          Confirmar
        </button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
      </div>

    </div>
  </div>
</div>

<!--Modal de eliminar todas las alertas -->
<div class="modal fade" id="deleteAllAlerts">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Confirmar acción</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        ¿Estás seguro de querer eliminar todas las alertas?
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button class="btn btn-danger" (click)="delSentAlerts(appuserId)" data-toggle="modal" data-target="#deleteAllAlerts">
          Confirmar
        </button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
      </div>

    </div>
  </div>
</div>

